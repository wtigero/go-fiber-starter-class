# üö¶ Rate Limiting & Caching - ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡πÜ (45 ‡∏ô‡∏≤‡∏ó‡∏µ)

## üìö ‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå
‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ API ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö cache ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û

## üéØ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ
- ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API (Rate Limiting)
- ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Memory Cache
- ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô API abuse

## üìã API Endpoints
- `GET /todos` - ‡∏î‡∏π todos (‡∏°‡∏µ rate limit 10 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ô‡∏≤‡∏ó‡∏µ)
- `GET /stats` - ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- `GET /cache/clear` - ‡∏•‡πâ‡∏≤‡∏á cache

## üîß ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
1. **Rate Limiting**: ‡∏à‡∏≥‡∏Å‡∏±‡∏î IP ‡∏•‡∏∞ 10 requests ‡∏ï‡πà‡∏≠‡∏ô‡∏≤‡∏ó‡∏µ
2. **Memory Cache**: ‡πÄ‡∏Å‡πá‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå API ‡πÑ‡∏ß‡πâ 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
3. **Stats**: ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

## üèÉ‚Äç‚ôÇÔ∏è ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ô

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:
```bash
cd starter
go mod tidy
go run main.go
```

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢:
```bash
cd complete
go mod tidy
go run main.go
```

## üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Rate Limiting

### 1. ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏õ‡∏Å‡∏ï‡∏¥ (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 1-10)
```bash
curl http://localhost:3000/todos
```
**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:** ‡∏õ‡∏Å‡∏ï‡∏¥

### 2. ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÄ‡∏Å‡∏¥‡∏ô limit (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 11+)
```bash
# ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ã‡πâ‡∏≥ ‡πÜ ‡πÄ‡∏£‡πá‡∏ß ‡πÜ
for i in {1..15}; do curl http://localhost:3000/todos; echo; done
```
**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 11:**
```json
{
  "error": "Rate limit exceeded. Try again later.",
  "retry_after": "45s"
}
```

### 3. ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
```bash
curl http://localhost:3000/stats
```
**‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:**
```json
{
  "total_requests": 15,
  "cache_hits": 8,
  "cache_misses": 2,
  "rate_limited": 5
}
```

## üîç ‡∏™‡∏¥‡πà‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ

### 1. Rate Limiting (‡πÉ‡∏ô Memory)
```go
type RateLimiter struct {
    requests map[string][]time.Time
    mutex    sync.RWMutex
}

func (r *RateLimiter) Allow(ip string) bool {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô requests ‡πÉ‡∏ô 1 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤
}
```

### 2. Memory Cache
```go
type Cache struct {
    data   map[string]CacheItem
    mutex  sync.RWMutex
}

type CacheItem struct {
    Value     interface{}
    ExpiresAt time.Time
}
```

### 3. Middleware ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
```go
app.Use("/todos", rateLimitMiddleware())
app.Use("/todos", cacheMiddleware())
```

## üìù ‡πÉ‡∏ô starter/ ‡∏à‡∏∞‡∏°‡∏µ:
- [ ] TODO: ‡∏™‡∏£‡πâ‡∏≤‡∏á RateLimiter struct
- [ ] TODO: ‡∏™‡∏£‡πâ‡∏≤‡∏á Cache struct  
- [ ] TODO: ‡∏™‡∏£‡πâ‡∏≤‡∏á middleware functions
- [ ] TODO: ‡πÄ‡∏û‡∏¥‡πà‡∏° statistics tracking

## ‚úÖ ‡πÉ‡∏ô complete/ ‡∏à‡∏∞‡∏°‡∏µ:
- ‚úÖ Rate limiter ‡πÅ‡∏ö‡∏ö in-memory
- ‚úÖ Cache system ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
- ‚úÖ Stats tracking
- ‚úÖ Clean error messages
- ‚úÖ Thread-safe operations

## üí° ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ/‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î

### ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:
- ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Redis
- ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö app ‡πÄ‡∏•‡πá‡∏Å ‡πÜ
- ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£

### ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î:
- ‡∏´‡∏≤‡∏¢ cache ‡πÄ‡∏°‡∏∑‡πà‡∏≠ restart app
- ‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö multiple servers
- ‡πÉ‡∏ä‡πâ memory ‡∏ö‡∏ô server

## ‚è≠Ô∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ
‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á ‡∏Ñ‡∏ß‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡πÄ‡∏õ‡πá‡∏ô:
- Redis ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö cache ‡πÅ‡∏•‡∏∞ rate limiting
- Database ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö statistics
- Distributed rate limiting

---
**‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô:** 45 ‡∏ô‡∏≤‡∏ó‡∏µ | **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å:** ‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ  
**‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:** ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ Redis 